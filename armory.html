<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Module armory</title>
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="EDoc">
</head>
<body bgcolor="white">
<div class="navbar"><a name="#navbar_top"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<hr>

<h1>Module armory</h1>
<ul class="index"><li><a href="#description">Description</a></li><li><a href="#index">Function Index</a></li><li><a href="#functions">Function Details</a></li></ul>Provides access to the World of Warcraft Armory.
<p>Copyright © 2008 Nick Gerakines</p>

<p><b>Version:</b> 0.4</p>
<p><b>Authors:</b> Nick Gerakines (<a href="mailto:nick@gerakines.net"><tt>nick@gerakines.net</tt></a>).</p>

<h2><a name="description">Description</a></h2>Provides access to the World of Warcraft Armory.
<h2><a name="index">Function Index</a></h2>
<table width="100%" border="1" cellspacing="0" cellpadding="2" summary="function index"><tr><td valign="top"><a href="#armory_fetch-1">armory_fetch/1</a></td><td></td></tr>
<tr><td valign="top"><a href="#dequeue-0">dequeue/0</a></td><td>Pops an item off of the list and returns it.</td></tr>
<tr><td valign="top"><a href="#fetchloop-0">fetchloop/0</a></td><td>The loop that dequeues items in the fetch queue and processes them.</td></tr>
<tr><td valign="top"><a href="#info-0">info/0</a></td><td>Returns the state used by the armory queue.</td></tr>
<tr><td valign="top"><a href="#parse_character-1">parse_character/1</a></td><td>Parse a chunk of xml that supposedly represents a character.</td></tr>
<tr><td valign="top"><a href="#parse_character_gear-1">parse_character_gear/1</a></td><td>Parse any character gear records available.</td></tr>
<tr><td valign="top"><a href="#parse_character_skills-1">parse_character_skills/1</a></td><td>Parse any character skills available.</td></tr>
<tr><td valign="top"><a href="#parse_guild-1">parse_guild/1</a></td><td>Parse a chunk of xml that supposedly represents a character.</td></tr>
<tr><td valign="top"><a href="#parse_guild_members-1">parse_guild_members/1</a></td><td>Parse any character skills available.</td></tr>
<tr><td valign="top"><a href="#process_character-2">process_character/2</a></td><td>Fetch a given character from the armory and process the response.</td></tr>
<tr><td valign="top"><a href="#process_guild-2">process_guild/2</a></td><td>Fetch a given guild from the armory and process the response.</td></tr>
<tr><td valign="top"><a href="#queue-1">queue/1</a></td><td>Adds an item to the queue and waits for the item to finish processing.</td></tr>
<tr><td valign="top"><a href="#queue-2">queue/2</a></td><td>Adds an item to the queue to be processed and the reponse passed to
  the callback function.</td></tr>
<tr><td valign="top"><a href="#start-0">start/0</a></td><td>Starts an armory process that calls are made to.</td></tr>
</table>

<h2><a name="functions">Function Details</a></h2>

<h3 class="function"><a name="armory_fetch-1">armory_fetch/1</a></h3>
<div class="spec">
<p><tt>armory_fetch(FetchData) -&gt; Result</tt>
<ul class="definitions"><li><tt>FetchData = {FetchType, RealmClass, Realm, Name}</tt></li>
<li><tt>RealmClass = string()</tt></li>
<li><tt>Realm = string()</tt></li>
<li><tt>RealmClass = string()</tt></li>
<li><tt>Name = character | guild</tt></li>
<li><tt>Result = {error, any()} | {ok, string()}</tt></li>
</ul></p>
</div>

<h3 class="function"><a name="dequeue-0">dequeue/0</a></h3>
<div class="spec">
<p><tt>dequeue() -&gt; any()</tt></p>
</div><p>Pops an item off of the list and returns it. This function should
  almost never be used directly as it is used by the internal fetchloop
  process. It can be used as a simple way to remove all items off of the
  queue without trying to set its state manually.</p>

<h3 class="function"><a name="fetchloop-0">fetchloop/0</a></h3>
<div class="spec">
<p><tt>fetchloop() -&gt; infinate</tt></p>
</div><p>The loop that dequeues items in the fetch queue and processes them.</p>

<h3 class="function"><a name="info-0">info/0</a></h3>
<div class="spec">
<p><tt>info() -&gt; any()</tt></p>
</div><p><p>Returns the state used by the armory queue.</p>
 
  This function is useful for debugging the armory server process. It will
  return the full state including the fetchloop process and queue as is.</p>

<h3 class="function"><a name="parse_character-1">parse_character/1</a></h3>
<div class="spec">
<p><tt>parse_character(XmlBody) -&gt; Result</tt>
<ul class="definitions"><li><tt>XmlBody = string()</tt></li>
<li><tt>Result = {ok, list(any())} | {error, atom()}</tt></li>
</ul></p>
</div><p>Parse a chunk of xml that supposedly represents a character.</p>

<h3 class="function"><a name="parse_character_gear-1">parse_character_gear/1</a></h3>
<div class="spec">
<p><tt>parse_character_gear(Xml) -&gt; Result</tt>
<ul class="definitions"><li><tt>Xml = any()</tt></li>
<li><tt>Result = list(Gear)</tt></li>
<li><tt>Gear = {string(), string()}</tt></li>
</ul></p>
</div><p>Parse any character gear records available.</p>

<h3 class="function"><a name="parse_character_skills-1">parse_character_skills/1</a></h3>
<div class="spec">
<p><tt>parse_character_skills(Xml) -&gt; Result</tt>
<ul class="definitions"><li><tt>Xml = any()</tt></li>
<li><tt>Result = list(Skill)</tt></li>
<li><tt>Skill = {string(), string()}</tt></li>
</ul></p>
</div><p>Parse any character skills available.</p>

<h3 class="function"><a name="parse_guild-1">parse_guild/1</a></h3>
<div class="spec">
<p><tt>parse_guild(XmlBody) -&gt; Result</tt>
<ul class="definitions"><li><tt>XmlBody = string()</tt></li>
<li><tt>Result = {ok, list(any())} | {error, atom()}</tt></li>
</ul></p>
</div><p>Parse a chunk of xml that supposedly represents a character. The
  caveat here is that the only information that is publicaly avaiable on a
  guild page is its member list.</p>

<h3 class="function"><a name="parse_guild_members-1">parse_guild_members/1</a></h3>
<div class="spec">
<p><tt>parse_guild_members(Xml) -&gt; Result</tt>
<ul class="definitions"><li><tt>Xml = any()</tt></li>
<li><tt>Result = list(Skill)</tt></li>
<li><tt>Skill = {string(), string()}</tt></li>
</ul></p>
</div><p>Parse any character skills available.</p>

<h3 class="function"><a name="process_character-2">process_character/2</a></h3>
<div class="spec">
<p><tt>process_character(FromPid, X2::{RealmClass, Realm, Name}) -&gt; ok</tt>
<ul class="definitions"><li><tt>FromPid = pid()</tt></li>
<li><tt>RealmClass = string()</tt></li>
<li><tt>Realm = string()</tt></li>
<li><tt>Name = string()</tt></li>
</ul></p>
</div><p>Fetch a given character from the armory and process the response.</p>

<h3 class="function"><a name="process_guild-2">process_guild/2</a></h3>
<div class="spec">
<p><tt>process_guild(FromPid, X2::{RealmClass, Realm, Name}) -&gt; ok</tt>
<ul class="definitions"><li><tt>FromPid = pid()</tt></li>
<li><tt>RealmClass = string()</tt></li>
<li><tt>Realm = string()</tt></li>
<li><tt>Name = string()</tt></li>
</ul></p>
</div><p>Fetch a given guild from the armory and process the response.</p>

<h3 class="function"><a name="queue-1">queue/1</a></h3>
<div class="spec">
<p><tt>queue(Item) -&gt; Result</tt>
<ul class="definitions"><li><tt>Item = any()</tt></li>
<li><tt>Result = {ok, pid()}</tt></li>
</ul></p>
</div><p>Adds an item to the queue and waits for the item to finish processing.
  This function will wait indefinitely for the response to come.</p>

<h3 class="function"><a name="queue-2">queue/2</a></h3>
<div class="spec">
<p><tt>queue(Item, Fun) -&gt; Result</tt>
<ul class="definitions"><li><tt>Item = {Type, {RealmClass, Realm, Name}}</tt></li>
<li><tt>Type = character | guild</tt></li>
<li><tt>RealmClass = string()</tt></li>
<li><tt>Realm = string()</tt></li>
<li><tt>Name = string()</tt></li>
<li><tt>Fun = <a href="#type-fun">'fun'()</a></tt></li>
<li><tt>Result = {ok, pid()}</tt></li>
</ul></p>
</div><p>Adds an item to the queue to be processed and the reponse passed to
  the callback function.</p>

<h3 class="function"><a name="start-0">start/0</a></h3>
<div class="spec">
<p><tt>start() -&gt; {error, any()} | {ok, pid()}</tt></p>
</div><p>Starts an armory process that calls are made to.</p>
<hr>

<div class="navbar"><a name="#navbar_bottom"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<p><i>Generated by EDoc, Dec 23 2008, 09:07:32.</i></p>
</body>
</html>
